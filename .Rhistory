# Load Required Packages: to be increased over the course
requiredPackages <- c("car","knitr","FactoMineR","missMDA","mvoutlier","chemometrics")
missingPackages <- requiredPackages[!(requiredPackages %in% installed.packages()[,"Package"])]
if(length(missingPackages)) install.packages(missingPackages)
setwd("C:/Users/Sergio/Dropbox/UPC/FIB/Analisis de datos y explotacion de la informacion (ADEI)/FIB-ADEI-Big-Data-Analysis")
load("set-datos.RData", envir = parent.frame(), verbose = FALSE)
#setwd("C:/Users/Sergio/Dropbox/UPC/FIB/Analisis de datos y explotacion de la informacion (ADEI)/FIB-ADEI-Big-Data-Analysis")
setwd("C:/Users/GUILLEM/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
load("set-datos.RData", envir = parent.frame(), verbose = FALSE)
#setwd("C:/Users/Sergio/Dropbox/UPC/FIB/Analisis de datos y explotacion de la informacion (ADEI)/FIB-ADEI-Big-Data-Analysis")
setwd("C:/Users/GUILLEM/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
#setwd("C:/Users/Sergio/Dropbox/UPC/FIB/Analisis de datos y explotacion de la informacion (ADEI)/FIB-ADEI-Big-Data-Analysis")
setwd("C:/Users/GUILLEM/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
#setwd("C:/Users/Sergio/Dropbox/UPC/FIB/Analisis de datos y explotacion de la informacion (ADEI)/FIB-ADEI-Big-Data-Analysis")
#setwd("C:/Users/GUILLEM/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
setwd("C:/Users/usuario/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
load("set-datos.RData", envir = parent.frame(), verbose = FALSE)
#Comprobar el tamaño de la muestra
dim(df)
# Graphics
names(df)
# Overview of data frame
summary(df)
#######################GUILLEM:
#Separamos variables target/no-target numéricas/categóricas (observamos un individuo cualquiera)
df[1,]
aux2<-c(11,21);
vars_target<-names(df)[aux2];vars_target
aux <- c(1,12:14,16:20)
vars_num<-names(df)[aux];vars_num
vars_cat<-names(df)[c(2:10,15)];vars_cat
#Analizamos variables según si son cat/num o target/no-target (obtenemos 4 clasificaciones)
#target+categorica (miramos qué nivles tiene)
levels(df$y) #solo hay yes/no no hay que hacer nada
#target+numerica (miramos qué valores toma)
summary(df$duration)#Vemos que hay valores muy pequeños, incluso 0, tambien de muy grandes.
hist(df$duration,100) #Miramos distribución
boxplot(df$duration) #Hacemos boxplot para ver outliers
calcQ <- function(x) {# Some useful functions
s.x <- summary(x)
iqr<-s.x[5]-s.x[2]
list(souti=s.x[2]-3*iqr, mouti=s.x[2]-1.5*iqr, min=s.x[1], q1=s.x[2], q2=s.x[3],
q3=s.x[5], max=s.x[6], mouts=s.x[5]+1.5*iqr, souts=s.x[5]+3*iqr ) }
out.var<-calcQ(df$duration);out.var
abline(h=650,col="red",lwd=2) #Fijamos límite soft
abline(h=979,col="magenta",lwd=2) #Fijamos límite extreme
aux<-order(df$duration,decreasing=TRUE)[1:10];df[aux,'duration'] #Hechamos un ojo a los 10 valores más extremos
df<-df[-aux[1:6],]#decidimos eliminamos los 6 elementos más extremos
boxplot(df$duration) #Hacemos boxplot de nuevo
aux<-which(df$duration<5);length(aux);df[aux,'duration']#Ahora miramos los que son inferiores a 5s (no puede considerarse llamada)
df<-df[-aux,]#decidimos eliminarlos todos
#no-target+categorica
for(i in vars_cat){
cat("################ ",i," ##################\n")
print(summary(df[,i]))
} #Vemos un resumen de los niveles de cada variable categorica
for(i in vars_cat){#Vamos a poner NA's en los unknows
sel<-which(df[,i]=="unknown")
if(length(sel)>0 && length(sel)<300){ cat(i, " -- ", length(sel), "\n")
df[sel,i]<-NA
df[,i]<-factor(df[,i])
}
}
#no-target+categorica
for(i in vars_cat){
cat("################ ",i," ##################\n")
print(summary(df[,i]))
} #Vemos un resumen de los niveles de cada variable categorica
for(i in vars_cat){#Vamos a poner NA's en los unknows
sel<-which(df[,i]=="unknown")
if(length(sel)>0 && length(sel)<300){ cat(i, " -- ", length(sel), "\n")
df[sel,i]<-NA
df[,i]<-factor(df[,i])
}
}
#sel<-which(df$poutcome=="nonexistent")#Hacemos lo mismo con poutcome y sus nonexitent
#print(length(sel))
#df[sel,'poutcome']<-NA
#df$poutcome<-factor(df$poutcome)
library(missMDA)
res.input<-imputeMCA(df[,2:6],ncp=1)#Ya funciona
summary(res.input$completeObs$job)
summary(res.input$completeObs)
#job- imputacion correcta
summary(df[,vars_cat[1]])
summary(res.input$completeObs[,1])
df$job<-res.input$completeObs[,1]
#job- imputacion correcta
summary(df[,vars_cat[1]])
summary(df[,vars_cat[2]])
summary(res.input$completeObs[,2])
names(df[2])
names(df[3])
summary(df[,vars_cat[3]])
summary(res.input$completeObs[,3])
res.input<-imputeMCA(df[,2:6],ncp=5)#Ya funciona
summary(res.input$completeObs)
#setwd("C:/Users/Sergio/Dropbox/UPC/FIB/Analisis de datos y explotacion de la informacion (ADEI)/FIB-ADEI-Big-Data-Analysis")
#setwd("C:/Users/GUILLEM/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
setwd("C:/Users/usuario/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
load("set-datos.RData", envir = parent.frame(), verbose = FALSE)
#Comprobar el tamaño de la muestra
dim(df)
# Graphics
names(df)
# Overview of data frame
summary(df)
#######################GUILLEM:
#Separamos variables target/no-target numéricas/categóricas (observamos un individuo cualquiera)
df[1,]
aux2<-c(11,21);
vars_target<-names(df)[aux2];vars_target
aux <- c(1,12:14,16:20)
vars_num<-names(df)[aux];vars_num
vars_cat<-names(df)[c(2:10,15)];vars_cat
#Analizamos variables según si son cat/num o target/no-target (obtenemos 4 clasificaciones)
#target+categorica (miramos qué nivles tiene)
levels(df$y) #solo hay yes/no no hay que hacer nada
#target+numerica (miramos qué valores toma)
summary(df$duration)#Vemos que hay valores muy pequeños, incluso 0, tambien de muy grandes.
boxplot(df$duration) #Hacemos boxplot para ver outliers
hist(df$duration,100) #Miramos distribución
calcQ <- function(x) {# Some useful functions
s.x <- summary(x)
iqr<-s.x[5]-s.x[2]
list(souti=s.x[2]-3*iqr, mouti=s.x[2]-1.5*iqr, min=s.x[1], q1=s.x[2], q2=s.x[3],
q3=s.x[5], max=s.x[6], mouts=s.x[5]+1.5*iqr, souts=s.x[5]+3*iqr ) }
out.var<-calcQ(df$duration);out.var
abline(h=650,col="red",lwd=2) #Fijamos límite soft
abline(h=979,col="magenta",lwd=2) #Fijamos límite extreme
aux<-order(df$duration,decreasing=TRUE)[1:10];df[aux,'duration'] #Hechamos un ojo a los 10 valores más extremos
df<-df[-aux[1:6],]#decidimos eliminamos los 6 elementos más extremos
boxplot(df$duration) #Hacemos boxplot de nuevo
aux<-which(df$duration<5);length(aux);df[aux,'duration']#Ahora miramos los que son inferiores a 5s (no puede considerarse llamada)
df<-df[-aux,]#decidimos eliminarlos todos
#no-target+categorica
for(i in vars_cat){
cat("################ ",i," ##################\n")
print(summary(df[,i]))
} #Vemos un resumen de los niveles de cada variable categorica
for(i in vars_cat){#Vamos a poner NA's en los unknows
sel<-which(df[,i]=="unknown")
if(length(sel)>0 && length(sel)<300){ cat(i, " -- ", length(sel), "\n")
df[sel,i]<-NA
df[,i]<-factor(df[,i])
}
}
#sel<-which(df$poutcome=="nonexistent")#Hacemos lo mismo con poutcome y sus nonexitent
#print(length(sel))
#df[sel,'poutcome']<-NA
#df$poutcome<-factor(df$poutcome)
library(missMDA)
res.input<-imputeMCA(df[,2:6],ncp=10)#Ya funciona
summary(res.input$completeObs)
#job- imputacion correcta
summary(df[,vars_cat[1]])
summary(res.input$completeObs[,1])
df$job<-res.input$completeObs[,1]
#marital- imputacion correcta
summary(df[,vars_cat[2]])
summary(res.input$completeObs[,2])
df$job<-res.input$completeObs[,2]
#education-
summary(df[,vars_cat[3]])
summary(res.input$completeObs[,3])
#education- imputacion correcta
summary(df[,vars_cat[3]])
summary(res.input$completeObs[,3])
df$job<-res.input$completeObs[,1]
summary(df[,vars_cat[4]])
summary(res.input$completeObs[,4])
df$job<-res.input$completeObs[,1]
for(i in vars_cat) cat(names(df[,i],"->",i))
for(i in vars_cat) cat(names(df[,i]),"->",i))
for(i in vars_cat) cat(names(df[,i]),"->",i)
for(i in vars_cat) cat(names(df[,i]),"->",print(i))
requiredPackages <- c("car","knitr","FactoMineR","missMDA","mvoutlier","chemometrics","AER")
missingPackages <- requiredPackages[!(requiredPackages %in% installed.packages()[,"Package"])]
if(length(missingPackages)) install.packages(missingPackages)
data("SwissLabor")
library(AER)
library(FactoMineR)
data("SwissLabor")
df[,vars_cat]<-res.input&completeObs
res.input<-imputeMCA(df[,2:6],ncp=10)#Ya funciona
df[,vars_cat]<-res.input&completeObs
df<-res.input&completeObs
res.input<-imputeMCA(df[,2:6],ncp=10)#Ya funciona
summary(res.input$completeObs)
df[,vars_cat]<-res.input$completeObs
df<-res.input$completeObs
[,vars_cat]
df[,vars_cat]<-res.input$completeObs
df[,vars_cat]<-res.input$completeObs
#setwd("C:/Users/Sergio/Dropbox/UPC/FIB/Analisis de datos y explotacion de la informacion (ADEI)/FIB-ADEI-Big-Data-Analysis")
#setwd("C:/Users/GUILLEM/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
setwd("C:/Users/usuario/Documents/ADEI/FIB-ADEI-Big-Data-Analysis")
load("set-datos.RData", envir = parent.frame(), verbose = FALSE)
#######################GUILLEM:
#Separamos variables target/no-target numéricas/categóricas (observamos un individuo cualquiera)
df[1,]
aux2<-c(11,21);
vars_target<-names(df)[aux2];vars_target
aux <- c(1,12:14,16:20)
vars_num<-names(df)[aux];vars_num
vars_cat<-names(df)[c(2:10,15)];vars_cat
aux<-order(df$duration,decreasing=TRUE)[1:10];df[aux,'duration'] #Hechamos un ojo a los 10 valores más extremos
df<-df[-aux[1:6],]#decidimos eliminamos los 6 elementos más extremos
boxplot(df$duration) #Hacemos boxplot de nuevo
aux<-which(df$duration<5);length(aux);df[aux,'duration']#Ahora miramos los que son inferiores a 5s (no puede considerarse llamada)
df<-df[-aux,]#decidimos eliminarlos todos
#no-target+categorica
for(i in vars_cat){
cat("################ ",i," ##################\n")
print(summary(df[,i]))
} #Vemos un resumen de los niveles de cada variable categorica
for(i in vars_cat){#Vamos a poner NA's en los unknows
sel<-which(df[,i]=="unknown")
if(length(sel)>0 && length(sel)<300){ cat(i, " -- ", length(sel), "\n")
df[sel,i]<-NA
df[,i]<-factor(df[,i])
}
}
#sel<-which(df$poutcome=="nonexistent")#Hacemos lo mismo con poutcome y sus nonexitent
#print(length(sel))
#df[sel,'poutcome']<-NA
#df$poutcome<-factor(df$poutcome)
library(missMDA)
res.input<-imputeMCA(df[,2:6],ncp=10)#Ya funciona
summary(res.input$completeObs)
summary(df)
head(df)
df[,vars_cat]<-res.input$completeObs
head(df)
